<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #poke-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        @font-face {
            font-family: 'Shilla_CultureB-Bold';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2206-02@1.0/Shilla_CultureB-Bold.woff2') format('woff2');
            font-weight: 700;
            font-style: normal;
        }

        .poke-card {
            font-family: 'Shilla_CultureB-Bold';
            color: white;
            display: flex;
            align-items: center;
            flex-direction: column;
            margin: 30px;
            height: 300px;
            width: 200px;
            box-sizing: border-box;
            transition: .4s;
            box-shadow: rgba(166, 255, 188, 0.3) 0px 0px 30px 7px, rgba(255, 255, 255, 0.15) 0px 1px 3px 1px;
        }

        .poke-card.active {
            font-family: 'Shilla_CultureB-Bold';
            color: white;
            display: flex;
            align-items: center;
            flex-direction: column;
            height: 300px;
            width: 200px;
            box-sizing: border-box;
            transition: .4s;
            box-shadow: rgba(255, 255, 255, 0.3) 0px 0px 30px 7px, rgba(255, 255, 255, 0.15) 0px 1px 3px 1px;

        }

        .poke-img {
            width: 100px;
            height: 100px;
            padding: 30px;
        }

        @font-face {
            font-family: 'Cafe24ClassicType-Regular';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2210-2@1.0/Cafe24ClassicType-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        h1 {
            font-family: 'Cafe24ClassicType-Regular';
            font-size: 50px;
            text-align: center;
            color: lightgreen;
            text-shadow:
                0 0 7px #fff,
                0 0 10px #fff,
                0 0 21px #fff,
                0 0 42px #0fa,
                0 0 82px #0fa,
                0 0 92px #0fa,
                0 0 102px #0fa,
                0 0 151px #0fa;
        }

        body {
            background-color: rgb(0, 0, 0);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        p{
            color: white;
            font-size: small;
            margin: 10px;
        }
        
    </style>
</head>

<body>
    <div>
        <h1>ポケモン</h1>
        <div id="poke-list">
            <!--<div class="poke-card">
             <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">身長 : <span>0.7</span> m</span>
            <span class="poke-weight">体重 : <span>6.9</span> kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">身長 : <span>0.7</span> m</span>
            <span class="poke-weight">体重 : <span>6.9</span> kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">身長 : <span>0.7</span> m</span>
            <span class="poke-weight">体重 : <span>6.9</span> kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">身長 : <span>0.7</span> m</span>
            <span class="poke-weight">体重 : <span>6.9</span> kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">身長 : <span>0.7</span> m</span>
            <span class="poke-weight">体重 : <span>6.9</span> kg</span>
        </div> 
        </div>-->
        </div>
        <div>
            <p><strong>총 <span id='total'></span>마리</strong></p>
        </div>
        

        <script src="./js/jquery-3.7.0.js"></script>
        <script>
            // 키, 몸무게 정보 :https://pokeapi.co/api/v2/pokemon/1
            // 이름, 종 정보 : https://pokeapi.co/api/v2/pokemon-habitat/1

            //포켓몬 도감 만들기
            // 1. Pokemon API에서 이름, 종, 키, 몸무게 4가지 정보 가져오기
            // *$.ajax()활용
            // 2. 가져온 정보를 2개의 배열에 각각 저장하기
            // 3. 각 배열의 내용을 태그에 출력하기

            let speciesList = []; // 이름, 종 데이터를 객체 형태로 저장하는 배열
            let pokemonList = []; // 키, 몸무게 데이터를 객체 형태로 저장하는 배열

            const getPokeData = (id) => {

                let pokeURL = `https://pokeapi.co/api/v2/pokemon-species/${id}`

                //aync속성: 통신방식을 비동기 or 동기처리로 변결할 수 있는 속성
                //true : 비동기 / false :동기
                $.ajax({
                    url: pokeURL,
                    async: false,
                    success: (result) => {
                        //서버로부터 응답받은 데이터는 매개변수를 만들어야 사용할 수 있다!!!
                        // console.log(result);
                        console.log(result.names[2].name, result.genera[1].genus);
                        speciesList.push({ name: result.names[2].name, genus: result.genera[1].genus });
                    },
                    error: () => {
                        alert('요청실패..');
                    }
                })
            }

            const getPokeData2 = (id) => {
                let pokeURL = `https://pokeapi.co/api/v2/pokemon/${id}`;
                $.ajax({
                    url: pokeURL,
                    async: false,
                    success: (result) => {
                        console.log(result.weight, result.height);
                        //키, 몸무게를 객체형태로 만든 후 배열에 저장해 보기
                        pokemonList.push({ weight: result.weight, height: result.height })

                    },
                    error: () => {

                    }
                })
            }
            //포켓몬 카드를 그리는 함수 구현
            // - (이름, 종), (몸무게, 키) 정보를 가지는 배열을 입력값으로 받는 함수
            const drawPokemonCard = (species, pokemons) => {
                //반복문을 이용해서 모든 포켓몬카드를 resultHTML 변수에 저장하기!
                for(i=0;i<species.length;i++){
                    let resultHTML = `
                    <div class="poke-card">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${i+1}.png"
                            alt="" class="poke-img">
                        <span class="poke-id">${i+1}</span>
                        <span class="poke-name">${species[i].name}</span>
                        <span class="poke-species">${species[i].genus}</span>
                        <span class="poke-height">身長 : <span>${pokemons[i].height/10}</span> m</span>
                        <span class="poke-weight">体重 : <span>${pokemons[i].weight/10}</span> kg</span>
                        
                    </div>`;
                    
                    // 총 포켓몬 수를 span태그에 출력하기
                    $('#total').text(species.length);
                    //생성된 포켓몬카드를 poke-list인 div 태그에 출력하기
                    $('#poke-list').append(resultHTML);



                }

            }


            // 151개의 이름, 종, 키, 몸무게 정보를 출력해 보기!
            for (let i = 1; i < 152; i++) {

                getPokeData(i);
                getPokeData2(i);
            }
            // console.log(speciesList);
            // console.log(pokemonList);

            //포켓몬카드를 그리는 함수
            drawPokemonCard(speciesList, pokemonList);

        </script>
</body>

</html>